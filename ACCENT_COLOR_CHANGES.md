# 主色调功能更新说明

## 已完成的修改

### 1. 主色调按钮 ✅
- 位置：左下角，Dark Mode 和语言选择器旁边
- 大小：28x28px (w-7 h-7) - 与其他按钮保持一致
- 样式：圆形按钮，显示当前主色调背景色 + 白色调色板图标
- 悬停效果：边框变亮

### 2. 主色调应用 ✅

现在主色调会影响以下 UI 元素：

#### 导航区域
- **文献库图标**：使用主色调（`text-accent`）
- **导航项悬停**：使用主色调背景（`hover:bg-accent`）

#### 操作按钮
- **导入文档按钮**：悬停时显示主色调背景
- **搜索按钮**：悬停时显示主色调背景

#### 拖拽手柄
- **左侧分隔线**：悬停和拖拽时显示主色调
- **右侧分隔线**：悬停和拖拽时显示主色调

### 3. 颜色选择器 ✅
- 8 种预设颜色（蓝、紫、粉、红、橙、绿、青、蓝绿）
- 4x2 网格布局
- 选中时显示加深边框
- 悬停时放大 1.1 倍
- 平滑过渡动画

### 4. CSS 变量系统 ✅

```css
:root {
  --accent-color: #3b82f6;           /* 主色调 */
  --accent-color-hover: #2563eb;     /* 悬停色（自动计算） */
}
```

### 5. 持久化 ✅
- 自动保存到 localStorage
- 页面刷新后恢复选择
- 主题切换不影响主色调

## 使用方法

1. 点击左下角的圆形主色调按钮
2. 在弹出菜单中选择喜欢的颜色
3. 颜色立即应用到整个应用
4. 观察以下变化：
   - 文献库图标颜色改变
   - 按钮悬停背景色改变
   - 拖拽手柄颜色改变
   - 导航项悬停背景色改变

## 技术细节

### CSS 类名
- `.text-accent` - 主色调文字
- `.bg-accent` - 主色调背景
- `.hover:bg-accent` - 悬停时主色调背景

### 动态计算
悬停色自动比主色调深 10%，通过 JavaScript 计算：

```javascript
function adjustBrightness(color, percent) {
  const num = parseInt(color.replace("#", ""), 16);
  const amt = Math.round(2.55 * percent);
  // ... 颜色计算逻辑
}
```

### !important 使用
为确保主色调优先级高于默认样式，使用了 `!important`：

```css
.text-accent {
  color: var(--accent-color) !important;
}
```

## 测试清单

- [x] 主色调按钮大小与其他按钮一致（28px）
- [x] 主色调选择后立即生效
- [x] 按钮悬停显示主色调
- [x] 拖拽手柄显示主色调
- [x] 文献库图标显示主色调
- [x] 颜色持久化到 localStorage
- [x] 页面刷新后恢复颜色
- [x] 类型检查通过（0 errors）

## 下一步优化建议

如果需要更多地方使用主色调，可以考虑：

1. 状态栏同步图标颜色
2. 下拉菜单选中状态背景色
3. 焦点环（focus ring）颜色
4. 链接颜色
5. 进度条颜色
